<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Decorator in Python | Duc Minh Quang Nguyen</title> <meta name="author" content="Duc Minh Quang Nguyen"> <meta name="description" content="# A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://nminhquang380.github.io/blog/2023/python_decorator/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Duc Minh Quang </span>Nguyen</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Portfolio</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item "> <a class="nav-link" href="/bucket_list/">My Bucket List</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Decorator in Python</h1> <p class="post-meta">August 31, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fa-solid fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/category/machinelearning"> <i class="fa-solid fa-tag fa-sm"></i> machinelearning</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Decorators are very powerful and useful tool in Python since it allows programmers to modify the behavior of a function or class. Decorators allow us to wrap another function in order to extend the behaviour of the wrapped function, without permanently modifying it. But before diving deep into decorators let us understand some concepts that will come in handy in learning the decorators.</p> <h2 id="first-class-objects">First Class Objects</h2> <p>In Python functions are first class objects which means <strong>that functions</strong> in python <strong>can be used or passed as arguments</strong>. Properties of first class functions:</p> <ul> <li>A function is an instance of the object type.</li> <li>Can be stored in a variable.</li> <li>Can be passed the function as a parameter to another function.</li> <li>Can return the function from a function.</li> <li>Can store them in data structures such as hash tables, lists,…</li> </ul> <p><strong>Ex1:</strong> Treat function as objects.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">shout</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span><span class="p">.</span><span class="nf">upper</span><span class="p">()</span>

<span class="nf">print</span><span class="p">(</span><span class="nf">shout</span><span class="p">(</span><span class="sh">'</span><span class="s">Hello</span><span class="sh">'</span><span class="p">))</span>

<span class="n">yell</span> <span class="o">=</span> <span class="n">shout</span>

<span class="nf">print</span><span class="p">(</span><span class="nf">yell</span><span class="p">(</span><span class="sh">'</span><span class="s">Hello</span><span class="sh">'</span><span class="p">))</span>

<span class="c1"># OUTPUT
# HELLO
# HELLO
</span></code></pre></div></div> <p>In the above example, we have assigned the function shout to a variable. This will not call the fucntion, instead, it takes the function object referenced by a <code class="language-plaintext highlighter-rouge">shout</code> and creates a second name pointing to it, <code class="language-plaintext highlighter-rouge">yell</code>.</p> <p><strong>Ex2:</strong> Passing the function as an argument</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">shout</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span><span class="p">.</span><span class="nf">upper</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">whisper</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span><span class="p">.</span><span class="nf">lower</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="n">greeting</span> <span class="o">=</span> <span class="nf">func</span><span class="p">(</span><span class="sh">'</span><span class="s">Hello</span><span class="sh">'</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">greeting</span><span class="p">)</span>

<span class="c1"># OUTPUT
# HELLO
# hello
</span></code></pre></div></div> <p><strong>Ex3:</strong> Returning functions from another function.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">create_adder</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">adder</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
    <span class="k">return</span> <span class="n">adder</span>

<span class="n">add_15</span> <span class="o">=</span> <span class="nf">create_adder</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">add_15</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="c1"># OUTPUT
# 25
</span></code></pre></div></div> <h2 id="decorators">Decorators</h2> <p>As stated above the decorators are used to modify the behaviour of function or class. In Decorators, functions are taken as the argument into another function and then called inside the wrapper function.</p> <p><strong>Decorator can modify</strong> the behaviour:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># inner function can access the outer local
</span>    <span class="c1"># functions like in this case "func"
</span>    <span class="k">def</span> <span class="nf">inner1</span><span class="p">():</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Hello, this is before function execution</span><span class="sh">"</span><span class="p">)</span>
 
        <span class="c1"># calling the actual function now
</span>        <span class="c1"># inside the wrapper function.
</span>        <span class="nf">func</span><span class="p">()</span>
 
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">This is after function execution</span><span class="sh">"</span><span class="p">)</span>
         
    <span class="k">return</span> <span class="n">inner1</span>
 
 
<span class="c1"># defining a function, to be called inside wrapper
</span><span class="k">def</span> <span class="nf">function_to_be_used</span><span class="p">():</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">This is inside the function !!</span><span class="sh">"</span><span class="p">)</span>
 
 
<span class="c1"># passing 'function_to_be_used' inside the
# decorator to control its behaviour
</span><span class="n">function_to_be_used</span> <span class="o">=</span> <span class="nf">hello_decorator</span><span class="p">(</span><span class="n">function_to_be_used</span><span class="p">)</span>
 
 
<span class="c1"># calling the function
</span><span class="nf">function_to_be_used</span><span class="p">()</span>

<span class="c1"># OUTPUT
# Hello, this is before function execution
# This is inside the function !!
# This is after function execution
</span></code></pre></div></div> <p><strong>Ex:</strong> Find out the excution time of a function using a decorator.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># importing libraries
</span><span class="kn">import</span> <span class="n">time</span>
<span class="kn">import</span> <span class="n">math</span>
 
<span class="c1"># decorator to calculate duration
# taken by any function.
</span><span class="k">def</span> <span class="nf">calculate_time</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
     
    <span class="c1"># added arguments inside the inner1,
</span>    <span class="c1"># if function takes any arguments,
</span>    <span class="c1"># can be added like this.
</span>    <span class="k">def</span> <span class="nf">inner1</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
 
        <span class="c1"># storing time before function execution
</span>        <span class="n">begin</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
         
        <span class="nf">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
 
        <span class="c1"># storing time after function execution
</span>        <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Total time taken in : </span><span class="sh">"</span><span class="p">,</span> <span class="n">func</span><span class="p">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="n">begin</span><span class="p">)</span>
 
    <span class="k">return</span> <span class="n">inner1</span>
 
 
 
<span class="c1"># this can be added to any function present,
# in this case to calculate a factorial
</span><span class="nd">@calculate_time</span>
<span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
 
    <span class="c1"># sleep 2 seconds because it takes very less time
</span>    <span class="c1"># so that you can see the actual difference
</span>    <span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="nf">factorial</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
 
<span class="c1"># calling the function.
</span><span class="nf">factorial</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># OUTPUT
# 3628800
# Total time taken in :  factorial 2.0061802864074707
</span></code></pre></div></div> <h3 id="chaining-decorators">Chaining Decorators</h3> <p>In simpler terms chaining decorators means decorating a function with multiple decorators.</p> <p>Example:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># code for testing decorator chaining
</span><span class="k">def</span> <span class="nf">decor1</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nf">func</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">inner</span>
 
<span class="k">def</span> <span class="nf">decor</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nf">func</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">inner</span>
 
<span class="nd">@decor1</span>
<span class="nd">@decor</span>
<span class="k">def</span> <span class="nf">num</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">10</span>
 
<span class="nd">@decor</span>
<span class="nd">@decor1</span>
<span class="k">def</span> <span class="nf">num2</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">10</span>
   
<span class="nf">print</span><span class="p">(</span><span class="nf">num</span><span class="p">())</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">num2</span><span class="p">())</span>

<span class="c1"># OUTPUT
# 400
# 200
</span></code></pre></div></div> <p>Reference: <a href="https://www.geeksforgeeks.org/decorators-in-python/" rel="external nofollow noopener" target="_blank">Decorators in Python</a></p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/error_exception_python/">Error and Exception in Python</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/intro_pytorch/">Introduction to PyTorch</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/build-ds-project/">Get lost when trying to build a Data Science Project</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/python_file_handling/">Handling File in Python</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/performance-measures/">Performance Metrics in Machine Learning</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Duc Minh Quang Nguyen. # Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. # Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. # Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?07b8786bab9b4abe90d10e61f7d12ff7" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>